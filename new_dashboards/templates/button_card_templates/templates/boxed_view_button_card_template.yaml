#######################################
#   Boxed View Button Card Template   #
#                                     #
# Variables:                          #
#                                     #
#######################################

boxed_view_button_card_template:
    template: no_base_button_card_template
    styles:
        card:
            - padding: 12px
            - pointer-events: none
            - cursor: default
        grid:
            - grid-template: "'contained' 100% / 100%"
    custom_fields:
        contained:
            card:
                type: custom:button-card
                template: no_base_button_card_template
                styles:
                    grid:
                        - grid-gap: 8px
                        - align-items: start
                extra_styles: >-
                    [[[
                        return `#container {
                            grid-template: ${ variables.regular_grid_template };
                        }

                        @media screen and (max-width: 870px) {
                            #container {
                                grid-template: ${ variables.grid_template_on_mediumscreen };
                            }
                        }

                        @media screen and (max-width: 450px) {
                            #container {
                                grid-template: ${ variables.grid_template_on_smallscreen }
                            }
                        }`
                    ]]]
                custom_fields: >-
                    [[[
                        let arrayToMap = {};
                        for (let i = 0; i < variables.boxes.length; i++) {

                            arrayToMap[variables.boxes[i]['box']] = {
                                card: {
                                    type: 'custom:button-card',
                                    template: 'boxed_area_button_card_template',
                                    variables: {
                                        title: variables.boxes[i]['title'],
                                        cards: [{
                                            type: 'custom:button-card',
                                            template: 'boxed_title_button_card_template',
                                            variables: {
                                                primary_info: variables.boxes[i]['title']
                                            }
                                        }].concat(variables.boxes[i]['cards'])
                                    }
                                }
                            }
                        }
                        return arrayToMap;
                    ]]]