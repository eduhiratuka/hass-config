################################################################################
#                             Home Dashboard View                              #
#                                                                              #
#     Esta view é responsável por exibir os dispositivos inteligentes da casa, #
# separados por seções                                                         #
#                                                                              #
################################################################################

title: Home
path: home
icon: mdi:home-circle
type: panel
cards:
  - type: custom:button-card
    template: sections_layout
    variables:
        sections:
          - title: >
                [[[
                    let horas = new Date().getHours();
                    let welcomeText = '';
                    if(horas < 12) welcomeText += 'Bom dia';
                    else if(horas < 18) welcomeText += 'Boa tarde';
                    else welcomeText += 'Boa noite';

                    welcomeText += ', ' + user.name.split(' ')[0];

                    return welcomeText;
                ]]]
            vertical_span: 2
            cards:
              - type: custom:button-card
                styles:
                    card:
                      - margin: 0
                      - padding: 0
                      - border: 0
                      - border-radius: 0
                      - background: none
                    grid:
                      - grid-template: "'status' auto 'graphic' auto / auto"
                custom_fields:
                    status:
                        card:
                            type: custom:button-card
                            template:
                                - entity_state_component
                                - border_top_ghost_mask
                            variables:
                                entity: sensor.casa_energia_solar_ecu_energia_hoje
                                primary_info: Geração de Energia - 7 Dias
                                secondary_info: Info
                                icon:  mdi:solar-power
                                icon_color: orange
                    graphic:
                        card:
                            type: custom:button-card
                            template:
                                - padding_all_ghost_mask
                                - border_bottom_ghost_mask
                            styles:
                                grid:
                                    - grid-template: "'contained' 100% / 100%"
                            custom_fields:
                                contained:
                                    card:
                                        type: custom:apexcharts-card
                                        graph_span: 7d
                                        span:
                                            end: day
                                        series:
                                          - entity: sensor.casa_energia_solar_ecu_energia_hoje
                                            name: Energia Gerada
                                            type: column
                                            group_by:
                                                func: max
                                                duration: 1d
                                            show:
                                                datalabels: true
                                                legend_value: false
                                                in_header: false
                                        apex_config:
                                            dataLabels:
                                                style:
                                                    colors: 
                                                      - '#FFF'
                                                background:
                                                    enabled: false
                                        card_mod:
                                            style: |
                                                ha-card {
                                                    padding-top: 0 !important;
                                                    border: 0;
                                                    border-radius: 0;
                                                }

          - title: Frente
            cards:
              - type: custom:mushroom-cover-card
                entity: cover.frente_portao_da_garagem
                name: Garagem
                show_position_control: false
                show_buttons_control: true
          - title: Fundos
            cards:
              - type: custom:mushroom-light-card
                entity: light.fundos_fita_de_led
                name: Fita de LED
                use_light_color: true
                show_brightness_control: true
                show_color_control: true
                show_color_temp_control: true
          - title: Escritório
            cards:
              - type: custom:mushroom-light-card
                entity: light.escritorio_luz_de_teto
                name: Luz de Teto
                use_light_color: true
                show_brightness_control: true
                show_color_control: true
                show_color_temp_control: true
          - title: Quarto do Edu
            cards:
              - type: custom:mushroom-climate-card
                entity: climate.quarto_do_edu_ar_condicionado
                name: Ar-condicionado
                hvac_modes:
                    - auto
                    - cool
                    - dry
                    - fan_only
                    - "off"
                show_temperature_control: true
              - type: custom:mushroom-light-card
                entity: light.quarto_do_edu_luz_de_cabeceira
                name: Luz de Cabeceira
                use_light_color: true
                show_brightness_control: true
                show_color_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.quarto_do_edu_luz_de_teto
                name: Luz de Teto
                use_light_color: true
                show_brightness_control: true
                show_color_control: true
                show_color_temp_control: true
